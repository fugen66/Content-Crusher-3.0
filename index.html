<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Content Crusher 3.0</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#0ea5e9">

    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;800&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #0ea5e9;
            --warning: #f59e0b;
            --text: #f8fafc;
            --text-dim: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { font-family: 'JetBrains Mono', monospace; font-size: 1.8em; color: var(--accent); text-transform: uppercase; letter-spacing: -1px; }
        .header p { color: var(--text-dim); font-size: 0.9em; margin-top: 5px; }

        .container { width: 100%; max-width: 600px; }

        .input-area { width: 100%; margin-bottom: 10px; position: relative; }
        
        textarea {
            width: 100%; height: 150px; background: var(--card); border: 2px solid #334155;
            border-radius: 15px; padding: 15px; color: var(--text); font-family: 'Inter', sans-serif;
            font-size: 16px; resize: none; transition: 0.3s;
        }
        textarea:focus { outline: none; border-color: var(--accent); }

        .char-counter {
            text-align: right; font-size: 0.8em; color: var(--text-dim); margin-bottom: 20px;
        }
        .char-counter.limit { color: var(--warning); font-weight: bold; }

        .grid-buttons {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 25px;
        }

        .mode-btn {
            background: #334155; border: none; padding: 15px; border-radius: 12px;
            color: var(--text); font-weight: 600; font-size: 0.95em; cursor: pointer;
            transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 5px;
        }
        .mode-btn span { font-size: 1.5em; }
        .mode-btn.active { background: var(--accent); color: white; box-shadow: 0 0 15px rgba(14, 165, 233, 0.4); }
        .btn-full { grid-column: span 2; background: #2b3544; }

        .result-box {
            background: #111827; border: 1px solid #334155; border-radius: 15px;
            padding: 20px; position: relative; min-height: 100px; margin-bottom: 15px;
        }
        .result-label {
            position: absolute; top: -10px; left: 15px; background: var(--accent);
            color: white; padding: 2px 10px; border-radius: 5px; font-size: 0.7em; font-weight: 800; text-transform: uppercase;
        }
        .output-text {
            font-family: 'JetBrains Mono', monospace; font-size: 0.85em; color: #a5f3fc;
            line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;
        }

        .action-area { display: flex; flex-direction: column; gap: 10px; }
        
        .copy-btn {
            width: 100%; background: var(--accent); border: none; padding: 15px;
            border-radius: 12px; color: white; font-weight: 800; text-transform: uppercase; cursor: pointer; font-size: 1em;
        }
        .btn-clear { background: rgba(239, 68, 68, 0.15); border: 2px solid #ef4444; color: #fca5a5; }
        
        .parts-container { display: none; gap: 10px; flex-wrap: wrap; margin-bottom: 15px; }
        .part-btn {
            min-width: 80px; flex: 1; background: #334155; border: 1px solid var(--warning); color: var(--warning);
            padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 0.9em;
        }
        .part-btn:hover { background: var(--warning); color: #000; }
        .part-btn.clicked { background: #064e3b; border-color: #4ade80; color: #4ade80; opacity: 0.5; }

        .tooltip {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #22c55e; color: white; padding: 15px 30px; border-radius: 50px;
            font-weight: bold; display: none; z-index: 100;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Content Crusher 3.0</h1>
        <p>–î—Ä–æ–±–∏–ª–∫–∞ –ª—é–±–æ–≥–æ –æ–±—ä—ë–º–∞</p>
    </div>

    <div class="container">
        <div class="input-area">
            <textarea id="inputText" placeholder="–í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ç–µ–∫—Å—Ç (–¥–∞–∂–µ –æ–≥—Ä–æ–º–Ω—ã–π)..." oninput="updateCounter()"></textarea>
        </div>
        <div class="char-counter" id="charCounter">0 —Å–∏–º–≤–æ–ª–æ–≤</div>

        <div class="grid-buttons">
            <button class="mode-btn" onclick="setMode('essence')"><span>üçã</span> –°—É—Ç—å</button>
            <button class="mode-btn" onclick="setMode('telegram')"><span>‚úàÔ∏è</span> Telegram</button>
            <button class="mode-btn" onclick="setMode('reels')"><span>üé¨</span> Reels</button>
            <button class="mode-btn" onclick="setMode('story')"><span>üìñ</span> –ò—Å—Ç–æ—Ä–∏—è</button>
            <button class="mode-btn" onclick="setMode('flowers')"><span>üå∏</span> –¶–≤–µ—Ç—ã</button>
            <button class="mode-btn" onclick="setMode('book')"><span>üìö</span> –ö–Ω–∏–≥–∞</button>
            <button class="mode-btn btn-full" onclick="setMode('provoke')"><span>üå∂Ô∏è</span> –ü—Ä–æ–≤–æ–∫–∞—Ç–æ—Ä</button>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ -->
        <div class="parts-container" id="partsContainer"></div>

        <div class="result-box">
            <span class="result-label" id="resultLabel">–ü—Ä–æ–º–ø—Ç</span>
            <div class="output-text" id="outputText">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è...</div>
        </div>

        <div class="action-area">
            <button class="copy-btn" onclick="copyResult()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            <button class="copy-btn btn-clear" onclick="clearAll()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
        </div>
    </div>

    <div class="tooltip" id="tooltip">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ! üöÄ</div>

    <script>
        const input = document.getElementById('inputText');
        const output = document.getElementById('outputText');
        const counter = document.getElementById('charCounter');
        const partsContainer = document.getElementById('partsContainer');
        const resultLabel = document.getElementById('resultLabel');
        
        // –£–≤–µ–ª–∏—á–∏–ª –ª–∏–º–∏—Ç –¥–æ 15000 —Å–∏–º–≤–æ–ª–æ–≤ (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–∞–∫—Å–∏–º—É–º –¥–ª—è GPT-4)
        const LIMIT = 15000; 
        let currentPromptTemplate = ""; 

        const prompts = {
            'essence': "–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –≤—ã—Å—Ç—É–ø–∏—Ç—å –≤ —Ä–æ–ª–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞. –ü—Ä–æ—á–∏—Ç–∞–π —Ç–µ–∫—Å—Ç –∏ –≤—ã–∂–º–∏ '–≤–æ–¥—É'.\n–ú–Ω–µ –Ω—É–∂–Ω–æ:\n1. –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å –≤ –æ–¥–Ω–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏.\n2. 5 –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ–∑–∏—Å–æ–≤ —Å–ø–∏—Å–∫–æ–º.\n–¢–µ–∫—Å—Ç:\n[TEXT]",
            'telegram': "–¢—ã ‚Äî –ê–Ω–¥—Ä–µ–π –†—É–¥–∞–∫–æ–≤. –¢–≤–æ–π —Å—Ç–∏–ª—å: –º—É–∂—Å–∫–æ–π, –∂–µ—Å—Ç–∫–∏–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π. –ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç –¥–ª—è Telegram.\n–°—Ç—Ä—É–∫—Ç—É—Ä–∞:\n1. –¶–µ–ø–ª—è—é—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫.\n2. –ö–æ—Ä–æ—Ç–∫–∏–µ –∞–±–∑–∞—Ü—ã.\n3. –í–æ–ø—Ä–æ—Å –≤ –∫–æ–Ω—Ü–µ.\n–¢–µ–∫—Å—Ç:\n[TEXT]",
            'reels': "–ü—Ä–µ–≤—Ä–∞—Ç–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –≤ —Å—Ü–µ–Ω–∞—Ä–∏–π Reels –Ω–∞ 60 —Å–µ–∫—É–Ω–¥.\n–§–æ—Ä–º–∞—Ç:\n- [0-3 —Å–µ–∫] –•—É–∫\n- [3-15 —Å–µ–∫] –ë–æ–ª—å\n- [15-45 —Å–µ–∫] –†–µ—à–µ–Ω–∏–µ\n- [45-60 —Å–µ–∫] –ü—Ä–∏–∑—ã–≤\n–¢–µ–∫—Å—Ç:\n[TEXT]",
            'story': "–ü–µ—Ä–µ–ø–∏—à–∏ —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –∫–∞–∫ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∏–ª–∏ –º–µ—Ç–∞—Ñ–æ—Ä—É. –ò—Å–ø–æ–ª—å–∑—É–π –æ–±—Ä–∞–∑—ã. –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å —ç–º–æ—Ü–∏–∏.\n–¢–µ–∫—Å—Ç:\n[TEXT]",
            'provoke': "–ü–µ—Ä–µ–ø–∏—à–∏ —Ç–µ–∫—Å—Ç –≤ –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–æ–Ω–Ω–æ–º, –¥–µ—Ä–∑–∫–æ–º —Å—Ç–∏–ª–µ. –í—ã–∑–æ–≤–∏ —Å–ø–æ—Ä—ã. –ë—É–¥—å –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω—ã–º.\n–¢–µ–∫—Å—Ç:\n[TEXT]",
            'flowers': "–¢—ã ‚Äî SMM-–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ —Ü–≤–µ—Ç–æ—á–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞. –ù–∞–ø–∏—à–∏ 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ—Å—Ç–∞ (–†–æ–º–∞–Ω—Ç–∏—á–Ω—ã–π, –ü—Ä–∞–∫—Ç–∏—á–Ω—ã–π, –≠—Å—Ç–µ—Ç–∏—á–Ω—ã–π, –°—Ä–æ—á–Ω—ã–π) + —Ö–µ—à—Ç–µ–≥–∏.\n–û–ø–∏—Å–∞–Ω–∏–µ –±—É–∫–µ—Ç–∞:\n[TEXT]",
            'book': "–¢—ã ‚Äî —Ç–æ–ø–æ–≤—ã–π –∫–Ω–∏–∂–Ω—ã–π –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥.\n–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –Ω–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞—é—â–∏–π –ø–æ—Å—Ç –¥–ª—è –ö–ù–ò–ì–ò.\n–ê–õ–ì–û–†–ò–¢–ú:\n1. –û–ø—Ä–µ–¥–µ–ª–∏ —Ç–µ–º—É –∫–Ω–∏–≥–∏.\n2. –û–ø—Ä–µ–¥–µ–ª–∏ –ë–û–õ–¨ –∞—É–¥–∏—Ç–æ—Ä–∏–∏.\n3. –ù–∞–ø–∏—à–∏ –ø–æ—Å—Ç: –ó–∞–≥–æ–ª–æ–≤–æ–∫, –ü—Ä–æ–±–ª–µ–º–∞, –ù–∞–¥–µ–∂–¥–∞, –ö–Ω–∏–≥–∞, –ü—Ä–∏–∑—ã–≤.\n–¢–µ–∫—Å—Ç:\n[TEXT]"
        };

        function updateCounter() {
            const len = input.value.length;
            counter.innerText = `${len} —Å–∏–º–≤–æ–ª–æ–≤`;
            if (len > LIMIT) {
                counter.classList.add('limit');
                counter.innerText += " (‚ö†Ô∏è –í–∫–ª—é—á–∞—é —Ä–µ–∂–∏–º –Ω–∞—Ä–µ–∑–∫–∏!)";
            } else {
                counter.classList.remove('limit');
            }
        }

        function setMode(mode) {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');

            const text = input.value.trim();
            if (!text) {
                output.innerText = "–°–Ω–∞—á–∞–ª–∞ –≤—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç!";
                output.style.color = "#f87171";
                return;
            }

            currentPromptTemplate = prompts[mode]; 

            if (text.length > LIMIT) {
                enableMultiStepMode(text);
            } else {
                disableMultiStepMode();
                output.style.color = "#a5f3fc";
                output.innerText = currentPromptTemplate.replace('[TEXT]', text);
            }
        }

        function enableMultiStepMode(text) {
            partsContainer.style.display = 'flex';
            partsContainer.innerHTML = ""; 
            resultLabel.innerText = "‚ö†Ô∏è –†–ï–ñ–ò–ú –°–ï–†–ò–ê–õ–ê";
            
            // –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê –ù–ê–†–ï–ó–ö–ò: –†–µ–∂–µ–º –ø–æ 15000 —Å–∏–º–≤–æ–ª–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∞–±–∑–∞—Ü—ã
            const chunks = text.match(new RegExp(`[\\s\\S]{1,${LIMIT}}`, 'g'));
            
            // –ö–Ω–æ–ø–∫–∏ —á–∞—Å—Ç–µ–π
            chunks.forEach((chunk, index) => {
                const btn = document.createElement('button');
                btn.className = 'part-btn';
                btn.innerText = `–ß–∞—Å—Ç—å ${index + 1}`;
                btn.onclick = function() {
                    const msg = `–Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é —Ç–µ–±–µ —Ç–µ–∫—Å—Ç –ø–æ —á–∞—Å—Ç—è–º. –≠—Ç–æ –ß–ê–°–¢–¨ ${index + 1} –∏–∑ ${chunks.length}. –ü—Ä–æ—Å—Ç–æ —Å–∫–∞–∂–∏ "–ü—Ä–∏–Ω—è—Ç–æ", –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –ø–æ–∫–∞.\n\n${chunk}`;
                    output.innerText = msg;
                    output.style.color = "#a5f3fc";
                    copyResult();
                    this.classList.add('clicked'); // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –Ω–∞–∂–∞—Ç—É—é
                    this.innerText = `–ß–∞—Å—Ç—å ${index + 1} ‚úÖ`;
                };
                partsContainer.appendChild(btn);
            });

            // –ö–Ω–æ–ø–∫–∞ –§–ò–ù–ê–õ
            const finalBtn = document.createElement('button');
            finalBtn.className = 'part-btn';
            finalBtn.style.background = '#0ea5e9';
            finalBtn.style.color = 'white';
            finalBtn.innerText = "üèÅ –§–ò–ù–ê–õ";
            finalBtn.onclick = () => {
                const finalMsg = currentPromptTemplate.replace('[TEXT]', "[–ò–°–ü–û–õ–¨–ó–£–ô –í–ï–°–¨ –¢–ï–ö–°–¢, –ö–û–¢–û–†–´–ô –Ø –û–¢–ü–†–ê–í–ò–õ –í–´–®–ï –í –ß–ê–°–¢–Ø–•]");
                output.innerText = finalMsg;
                output.style.color = "#a5f3fc";
                copyResult();
            };
            partsContainer.appendChild(finalBtn);

            output.style.color = "#f59e0b";
            output.innerText = `–¢–µ–∫—Å—Ç –æ–≥—Ä–æ–º–Ω—ã–π (${text.length} —Å–∏–º–≤). –Ø —Ä–∞–∑–±–∏–ª –µ–≥–æ –Ω–∞ ${chunks.length} —á–∞—Å—Ç–µ–π.\n\n–ò–ù–°–¢–†–£–ö–¶–ò–Ø:\n1. –ñ–º–∏ –∫–Ω–æ–ø–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É (–æ–Ω–∏ –±—É–¥—É—Ç –∑–µ–ª–µ–Ω–µ—Ç—å).\n2. –í—Å—Ç–∞–≤–ª—è–π –≤ GPT.\n3. –í –∫–æ–Ω—Ü–µ –Ω–∞–∂–º–∏ –§–ò–ù–ê–õ.`;
        }

        function disableMultiStepMode() {
            partsContainer.style.display = 'none';
            resultLabel.innerText = "–ü–†–û–ú–ü–¢";
        }

        function copyResult() {
            const text = output.innerText;
            if (text.includes("–í—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç") || text.includes("–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è")) return;
            navigator.clipboard.writeText(text);
            const tooltip = document.getElementById('tooltip');
            tooltip.style.display = 'block';
            setTimeout(() => tooltip.style.display = 'none', 1500);
        }

        function clearAll() {
            input.value = "";
            output.innerText = "–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–ª—à–µ–±–Ω—ã–π –ø—Ä–æ–º–ø—Ç...";
            output.style.color = "#a5f3fc"; 
            disableMultiStepMode();
            updateCounter();
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
        }
    </script>
</body>
</html>